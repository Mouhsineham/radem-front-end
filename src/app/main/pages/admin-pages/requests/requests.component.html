<div class="col-md-12 py-3">
  <div class="card">
    <div class="card-body">
      <h4 class="card-title">Liste des demandes</h4>
      <div class="table-responsive my-5">
        <div>
              <button type="button" class="btn btn btn-outline-primary" (click)="LoadCancellationRequest()" >Résiliations</button>
              <button type="button" class="btn btn btn-outline-primary" (click)="LoadSubscriptionRequest()">Abonnements</button>
              <button type="button" class="btn btn btn-outline-primary" (click)="LoadRefundRequest()">Remboursements</button>
              <input type="text" class="col-3 form-control pull-right" placeholder="Rechercher"/>
        </div><br>
        <table class="table table-striped table-bordered table-hover">
          <thead class="table-light">
          <tr>
            <th scope="col">Nº demande</th>
            <th scope="col">Demandeur</th>
            <th scope="col">Type</th>
            <th scope="col">Date création</th>
            <th scope="col">Agent</th>
            <th scope="col">Service concerné</th>
            <th scope="col">Etat</th>
          </tr>
          </thead>
          <tbody>
          <app-data-not-available *ngIf="!requests || requests.length == 0; else dataAvailable" [colSpan]="7"></app-data-not-available>

          <ng-template #dataAvailable>
          <tr *ngFor="let request of requests">
            <td><a [routerLink] = "['/admin/requests', request.id]">{{request.requestNumber}}</a></td>
            <td *ngIf="request.applicant != null">{{request.applicant.firstname}} {{request.applicant.lastname}}</td>
            <td *ngIf="request.applicant == null">{{request.client?.firstname + ' ' + request.client?.lastname}}</td>
            <td>{{request.type}}</td>
            <td>{{request.createdAt | date: 'dd/MM/yyyy' }}</td>
            <td>{{!request.agent ? '-' : request.agent.firstname + ' ' + request.agent.lastname}}</td>
            <td>{{!request?.service ? '-' : request?.service}}</td>
            <td><span class="badge badge-primary">{{request.status}}</span></td>
          </tr>
          </ng-template>
          </tbody>
        </table>
      </div>
       <!--Card body end-->
    </div>
  </div>
</div>



