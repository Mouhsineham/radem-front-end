<!--Tooltip Starts-->
<div class="content-header row">
   <div class="content-header-left col-md-6 col-12 mb-1">
      <h3 class="content-header-title">Mes contrats</h3>
   </div>
   <div class="content-header-right breadcrumbs-right breadcrumbs-top col-md-6 col-12">
      <div class="breadcrumb-wrapper col-12">
         <ol class="breadcrumb">
            <li class="breadcrumb-item">
               <a routerLink="/home">Accueil</a>
            </li>
            <li class="breadcrumb-item active">Mes contrats
            </li>
         </ol>
      </div>
   </div>
</div>
<div class="content-body">
   <section class="row">
      <div class="col-sm-12">
         <!-- What is-->
         <div id="what-is" class="card">
            <div class="card-header">
               <h4 class="card-title">Consulter vos contrats</h4>
               <a class="heading-elements-toggle"><i class="fa fa-ellipsis-v font-medium-3"></i></a>
               <div class="heading-elements">
               </div>
            </div>
            <div class="card-content collapse show">
               <div class="card-body">
                  <div class="table-responsive">
                     <table class="table table-striped table-bordered table-hover">
                        <thead class="table-light">
                        <tr>
                           <th scope="col">#</th>
                           <th scope="col">Nº contrat</th>
                           <th scope="col">Etat contrat</th>
                           <th scope="col">Adresse facturation</th>
                           <th scope="col">Derniere consomation</th>
                           <th scope="col">Derniere facture</th>
                           <th scope="col">Facture a payer</th>
                           <th scope="col">Historique de consomation</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="table-primary">
                           <th scope="row"><i class="fa fa-tint fa-2x text-primary" aria-hidden="true"></i></th>
                           <td><a class="cursor-pointer" (click)="openContractDetail(contractDetails)">1</a></td>
                           <td>Test</td>
                           <td>Test Test Test</td>
                           <td>Test</td>
                           <td>Test</td>
                           <td>Test</td>
                           <td><a class="cursor-pointer" (click)="openHistory(historyDetail)"><i class="fa fa-list"
                                                                                                 aria-hidden="true"></i></a>
                           </td>
                        </tr>
                        <tr class="table-warning">
                           <th scope="row"><i class="fa fa-bolt fa-2x text-warning" aria-hidden="true"></i></th>
                           <td>2</td>
                           <td>Test</td>
                           <td>Test Test Test</td>
                           <td>Test</td>
                           <td>Test</td>
                           <td>Test</td>
                           <td><a class="cursor-pointer" (click)="openHistory(historyDetail)"><i class="fa fa-list"
                                                                                                 aria-hidden="true"></i></a>
                           </td>
                        </tr>
                        </tbody>
                     </table>
                  </div>
                  <div class="offset-md-4 col-md-8 col-xs-12 table-responsive">
                     <table class="table table-bordered">
                        <tbody>
                        <tr>
                           <th class="table-head-l-orange" scope="row" colspan="2">Solde crediteur hors participation
                           </th>
                           <td class="table-b-orange">30.00</td>
                        </tr>
                        <tr>
                           <th class="table-head-l-orange" scope="row" colspan="2">Solde crediteur participation</th>
                           <td class="table-b-orange">180.00</td>
                        </tr>
                        <tr>
                           <th class="table-head-l-orange" scope="row" colspan="2">Solde provision</th>
                           <td class="table-b-orange">0.00</td>
                        </tr>
                        </tbody>
                     </table>
                  </div>
                  <div class="d-block">
                     <h5 class="card-title text-table">Nº de contrat: <span class="text-primary h5">859310</span></h5>
                  </div>
                  <div class="table-responsive">
                     <table class="table table-bordered">
                        <thead class="table-light">
                        <tr>
                           <th scope="col">
                              <input type="checkbox" class="align-center">
                           </th>
                           <th scope="col">Nº de facture</th>
                           <th scope="col">Nº d'echeance</th>
                           <th scope="col">Nº de Police</th>
                           <th scope="col">Date d'écheance</th>
                           <th scope="col">Type</th>
                           <th scope="col">Montant (Dhs)</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                           <td scope="row"><input type="checkbox" class="align-center"></td>
                           <td><a class="cursor-pointer" (click)="openBillDetail(billDetails)">8364</a></td>
                           <td>1</td>
                           <td>Test</td>
                           <td>Test Test Test</td>
                           <td>Test</td>
                           <td>Test</td>
                        </tr>
                        <tr>
                           <td scope="row"><input type="checkbox" class="align-center"></td>
                           <td>9374</td>
                           <td>2</td>
                           <td>Test</td>
                           <td>Test Test Test</td>
                           <td>Test</td>
                           <td>Test</td>
                        </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
            </div>
         </div>
         <!--/ What is-->
      </div>
   </section>
</div>

<ng-template #contractDetails>
   <div class="modal-header">
      <h4 class="modal-title pull-left">Détails du contrat</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
         <span aria-hidden="true">&times;</span>
      </button>
   </div>
   <div class="modal-body">
      <div class="my-2">
         Contenu de Détails du contrat
      </div>
      <div class="row">
         <div class="col-6">
            <h5 class="title text-center">Dernier index</h5>
            <p>
               <span class="text-bold-700">Numero du compteur : </span> <span class="small">3456789345</span>
            </p>
            <p>
               <span class="text-bold-700">Date de relève : </span> <span class="small">03-06-2018 11:35</span>
            </p>
            <p>
               <span class="text-bold-700">Index : </span> <span class="small">33560</span>
            </p>
         </div>
         <div class="col-6">
            <h5 class="title text-center">Derniere facture</h5>
            <p>
               <span class="text-bold-700">REF : </span> <span class="small">ELC12121</span>
            </p>
            <p>
               <span class="text-bold-700">Volume : </span> <span class="small">67 KW</span>
            </p>
            <p>
               <span class="text-bold-700">Monant : </span> <span class="small">230 DH</span>
            </p>
         </div>
      </div>
   </div>
</ng-template>

<ng-template #billDetails>
   <div class="modal-header bg-radem">
      <h4 class="modal-title pull-left">Détails de la facture</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
         <span aria-hidden="true">&times;</span>
      </button>
   </div>
   <div class="modal-body">
      <div class="col-6">
         <h5 class="title">Dernier index</h5>
         <p>
            <span class="text-bold-700">Numero du compteur : </span> <span class="small">3456789345</span>
         </p>
         <p>
            <span class="text-bold-700">Date de relève : </span> <span class="small">03-06-2018 11:35</span>
         </p>
         <p>
            <span class="text-bold-700">Index : </span> <span class="small">33560</span>
         </p>
      </div>
      <div class="">
         <table class="table table-responsive-lg">
            <thead class="table-secondary">
            <tr>
               <th scope="row">Libelle</th>
               <th scope="col">Prix unitaire</th>
               <th scope="col">Quantite</th>
               <th scope="col">Montant HT</th>
               <th scope="col">Taux TVA</th>
               <th scope="col">Montant TVA</th>
            </tr>
            </thead>
            <tbody>
            <tr>
               <td colspan="6"><h6 class="text-bold-700">Redevances fixes</h6></td>
            </tr>
            <tr>
               <th scope="row">row 0</th>
               <td class="">test 0</td>
               <td class="">test 0</td>
               <td class="">test 0</td>
               <td class="">test 0</td>
               <td class="">test 0</td>
            </tr>
            <tr>
               <th scope="row">row 1</th>
               <td class="">test 1</td>
               <td class="">test 1</td>
               <td class="">test 1</td>
               <td class="">test 1</td>
               <td class="">test 1</td>
            </tr>
            <tr>
               <th scope="row">row 2</th>
               <td class="">test 2</td>
               <td class="">test 2</td>
               <td class="">test 2</td>
               <td class="">test 2</td>
               <td class="">test 2</td>
            </tr>
            <tr>
               <td colspan="6"><h6 class="text-bold-700">Consomation electricite</h6></td>
            </tr>
            <tr>
               <th scope="row">row 0</th>
               <td class="">test 0</td>
               <td class="">test 0</td>
               <td class="">test 0</td>
               <td class="">test 0</td>
               <td class="">test 0</td>
            </tr>
            <tr>
               <td colspan="6" class="ml-0"><h6 class="text-bold-700">Tppan</h6></td>
            </tr>
            <tr class="">
               <th scope="row">row 0</th>
               <td class="">test 0</td>
               <td class="">test 0</td>
               <td class="">test 0</td>
               <td class="">test 0</td>
               <td class="">test 0</td>
            </tr>
            <tr>
               <th scope="row">row 1</th>
               <td class="">test 1</td>
               <td class="">test 1</td>
               <td class="">test 1</td>
               <td class="">test 1</td>
               <td class="">test 1</td>
            </tr>
            <tr>
               <th scope="row">row 2</th>
               <td class="">test 2</td>
               <td class="">test 2</td>
               <td class="">test 2</td>
               <td class="">test 2</td>
               <td class="">test 2</td>
            </tr>
            </tbody>
         </table>
      </div>
      <div>
      </div>
      <div class="container-fluid">

         <div class="card mb-1 border-grey-blue border-darken-3">
            <div class="p-1">
               <p class="mb-0">
                  <strong>Résumé</strong>
               </p>
               <div class="row mt-2">
                  <p class="col-4">
                     <span class="text-bold-700">Total HT : </span>
                     <span class="font-weight-normal mx-2">700.00(DHs)</span>
                  </p>

                  <p class="col-4">
                     <span class="text-bold-700">Total TVA : </span>
                     <span class="font-weight-normal mx-2">39.21(DHs)</span>
                  </p>
                  <p class="col-4">
                     <span class="text-bold-700">Total TTC : </span>
                     <span class="font-weight-normal mx-2">739.21(DHs)</span>
                  </p>
               </div>
            </div>
         </div>
      </div>
   </div>
</ng-template>

<ng-template #historyDetail>
   <div class="modal-header bg-radem">
      <h4 class="modal-title pull-left">Historique de consomation</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
         <span aria-hidden="true">&times;</span>
      </button>
   </div>
   <div class="modal-body">
      <div class="row">
         <div class="col-md-12">
            <table class="table table-responsive">
               <thead class="table-secondary">
               <tr>
                  <th scope="row">Periode</th>
                  <th scope="col">JAN</th>
                  <th scope="col">FÉV</th>
                  <th scope="col">MAR</th>
                  <th scope="col">AVR</th>
                  <th scope="col">MAI</th>
                  <th scope="col">JUIN</th>
                  <th scope="col">JUIL</th>
                  <th scope="col">AOÛ</th>
                  <th scope="col">SEP</th>
                  <th scope="col">OCT</th>
                  <th scope="col">NOV</th>
                  <th scope="col">DÉC</th>
               </tr>
               </thead>
               <tbody>
               <tr>
                  <th scope="row">Montant HT</th>
                  <td scope="col">120.00</td>
                  <td scope="col">89.90</td>
                  <td scope="col">230.00</td>
                  <td scope="col">124.00</td>
                  <td scope="col">120.89</td>
                  <td scope="col">186.78</td>
                  <td scope="col">86.90</td>
                  <td scope="col">124.00</td>
                  <td scope="col">89.90</td>
                  <td scope="col">230.00</td>
                  <td scope="col">124.40</td>
                  <td scope="col">186.78</td>
               </tr>
               </tbody>
            </table>
         </div>
         <div class="col-md-12">
            <div class="card">
               <h5 class="card-title text-center">Evolution de votre consomation en (m3)</h5>
               <div class="card-body">
                  <div style="display: block">
                     <!--<h6 class="card-title text-center py-3">{{chartConsoTitle}}</h6>-->
                     <canvas baseChart
                             [chartType]="chartType"
                             [datasets]="chartDatasets"
                             [labels]="chartLabels"
                             [colors]="chartColors"
                             [options]="chartOptions"
                             [legend]="true"
                             (chartHover)="chartHovered($event)"
                             (chartClick)="chartClicked($event)">
                     </canvas>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</ng-template>